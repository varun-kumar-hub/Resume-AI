const pdf = require('pdf-parse');

async function testPdf() {
    console.log('Testing pdf-parse (v1.1.1) with binary buffer...');

    // Minimal valid PDF binary representation (using hex to avoid encoding issues)
    // This is a very simple PDF 1.4 with one page saying "Hello World"
    const pdfHex =
        "255044462d312e340a25c2e5c2a3c2cfc2d30a312030206f626a0a3c3c2f547970652f436174616c6f672f50616765732032203020523e3e0a656e646f626a0a322030206f626a0a3c3c2f547970652f50616765732f4b6964735b33203020525d2f436f756e7420313e3e0a656e646f626a0a332030206f626a0a3c3c2f547970652f506167652f4d65646961426f785b302030203539352e3238203834312e38395d2f506172656e742032203020522f5265736f75726365733c3c2f466f6e743c3c2f46312034203020523e3e3e3e2f436f6e74656e74732035203020523e3e0a656e646f626a0a342030206f626a0a3c3c2f547970652f466f6e742f537562747970652f54797065312f42617365466f6e742f48656c7665746963613e3e0a656e646f626a0a352030206f626a0a3c3c2f4c656e6774682034343e3e73747265616d0a42540a2f46312032342054660a313030203730302054640a2848656c6c6f20576f726c642920546a0a45540a656e6473747265616d0a656e646f626a0a787265660a3020360a3030303030303030303020363535333520660a30303030303030303130203030303030206e0a30303030303030303630203030303030206e0a30303030303030313137203030303030206e0a30303030303030323933203030303030206e0a30303030303030333830203030303030206e0a747261696c65720a3c3c2f53697a6520362f526f6f742031203020523e3e0a7374617274787265660a3437340a2525454f460a";

    // Convert hex to buffer
    const buffer = Buffer.from(pdfHex, 'hex');

    try {
        const data = await pdf(buffer);
        console.log('Success! Parsed text:', data.text.trim());
    } catch (error) {
        console.error('Error parsing PDF:', error);
    }
}

testPdf();
